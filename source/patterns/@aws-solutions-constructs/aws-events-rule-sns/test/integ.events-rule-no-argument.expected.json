{
    "Resources": {
        "testeventsrulesnsEncryptionKey2CE611DB": {
            "DeletionPolicy": "Retain",
            "Properties": {
              "EnableKeyRotation": true,
              "KeyPolicy": {
                "Statement": [
                  {
                    "Action": [
                      "kms:Create*",
                      "kms:Describe*",
                      "kms:Enable*",
                      "kms:List*",
                      "kms:Put*",
                      "kms:Update*",
                      "kms:Revoke*",
                      "kms:Disable*",
                      "kms:Get*",
                      "kms:Delete*",
                      "kms:ScheduleKeyDeletion",
                      "kms:CancelKeyDeletion",
                      "kms:GenerateDataKey",
                      "kms:TagResource",
                      "kms:UntagResource"
                    ],
                    "Effect": "Allow",
                    "Principal": {
                      "AWS": {
                        "Fn::Join": [
                          "",
                          [
                            "arn:",
                            {
                              "Ref": "AWS::Partition"
                            },
                            ":iam::111111111111:root"
                          ]
                        ]
                      }
                    },
                    "Resource": "*"
                  }
                ],
                "Version": "2012-10-17"
              }
            },
            "Type": "AWS::KMS::Key",
            "UpdateReplacePolicy": "Retain"
          },
          "testeventsrulesnsEventsRule5F1C01CC": {
            "Properties": {
              "ScheduleExpression": "rate(5 minutes)",
              "State": "ENABLED",
              "Targets": [
                {
                  "Arn": {
                    "Ref": "testeventsrulesnsSnsTopicCEB51DAD"
                  },
                  "Id": "Target0"
                }
              ]
            },
            "Type": "AWS::Events::Rule"
          },
          "testeventsrulesnsSnsTopicCEB51DAD": {
            "Properties": {
              "KmsMasterKeyId": {
                "Ref": "testeventsrulesnsEncryptionKey2CE611DB"
              }
            },
            "Type": "AWS::SNS::Topic"
          },
          "testeventsrulesnsSnsTopicPolicyF1A0FC73": {
            "Properties": {
              "PolicyDocument": {
                "Statement": [
                  {
                    "Action": [
                      "SNS:Publish",
                      "SNS:RemovePermission",
                      "SNS:SetTopicAttributes",
                      "SNS:DeleteTopic",
                      "SNS:ListSubscriptionsByTopic",
                      "SNS:GetTopicAttributes",
                      "SNS:Receive",
                      "SNS:AddPermission",
                      "SNS:Subscribe"
                    ],
                    "Condition": {
                      "StringEquals": {
                        "AWS:SourceOwner": "111111111111"
                      }
                    },
                    "Effect": "Allow",
                    "Principal": {
                      "AWS": {
                        "Fn::Join": [
                          "",
                          [
                            "arn:",
                            {
                              "Ref": "AWS::Partition"
                            },
                            ":iam::111111111111:root"
                          ]
                        ]
                      }
                    },
                    "Resource": {
                      "Ref": "testeventsrulesnsSnsTopicCEB51DAD"
                    },
                    "Sid": "TopicOwnerOnlyAccess"
                  },
                  {
                    "Action": [
                      "SNS:Publish",
                      "SNS:RemovePermission",
                      "SNS:SetTopicAttributes",
                      "SNS:DeleteTopic",
                      "SNS:ListSubscriptionsByTopic",
                      "SNS:GetTopicAttributes",
                      "SNS:Receive",
                      "SNS:AddPermission",
                      "SNS:Subscribe"
                    ],
                    "Condition": {
                      "Bool": {
                        "aws:SecureTransport": "false"
                      }
                    },
                    "Effect": "Deny",
                    "Principal": "*",
                    "Resource": {
                      "Ref": "testeventsrulesnsSnsTopicCEB51DAD"
                    },
                    "Sid": "HttpsOnly"
                  },
                  {
                    "Action": "sns:Publish",
                    "Effect": "Allow",
                    "Principal": {
                      "Service": "events.amazonaws.com"
                    },
                    "Resource": {
                      "Ref": "testeventsrulesnsSnsTopicCEB51DAD"
                    },
                    "Sid": "2"
                  }
                ],
                "Version": "2012-10-17"
              },
              "Topics": [
                {
                  "Ref": "testeventsrulesnsSnsTopicCEB51DAD"
                }
              ]
            },
            "Type": "AWS::SNS::TopicPolicy"
          }
    }
}
